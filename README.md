# ereefs-grid-shapefile
Eric Lawrey - Australian Institute of Marine Science - 10 Feb 2020

This repository contains scripts that create shapefile versions of the GBR1 and GBR4 grids used in the eReefs models. These shapefiles are useful for showing the extent and detail of the eReefs models. This conversion extracts polygons for the grid with one polygon per pixel. It does not extract the data from the NetCDF model data. 

# 1 - Convert eReefs grid in NetCDF file to shapefile polygon (1_grid2shapefile.R)
This script converts the eReefs NetCDF data file into a shapefile that we can map in QGIS. It extracts a polygon for each of the grid cells. This script does not copy over all the NetCDF data, but instead only copies over the bathymetry of the grid cells to allow the 'wet' cells of the model to be visualised. The depth attribute (dfData) can be plotted to see where the wet cells in the model grid are.

This script needs R to run an a NetCDF files from the eReefs THREDDS server. They are not included here due to their size (30GB). See 1_grid2shapefile.R for more details and links to these files.


# 2 - eReefs model boundary - Dissolve the shapefile polygon (2_grid_Boundary-poly.qgz, 2_Run-in-QGIS_Bounding-poly.py)
In this step we calculate the boundary for each eReefs model. This polygon can be used to get an overview of where the eReefs models can be used, without the clutter of the grid. This is achieved by dissolving all the 'wet' cell polygons from step 1 into a single polygon that corresponds to the boundary. This script uses the processing capabilities of QGIS. To run this script you need QGIS installed. This script should be run from the Python Console in QGIS. To do so use the 'Show Editor' in the Python console, then 'Open script...', followed by 'Run Script'.

The QGIS map file 2_grid_Boundary-poly.qgz is essentially blank and is used as a document to run the script in. It provides the path that the data files are referenced against.


# Directories
- export 
	This directory contains the shapefiles of the eReefs grids generated by the 1_grid2shapefile.R and 2_Run-in-QGIS_Bounding-poly.py scripts 
